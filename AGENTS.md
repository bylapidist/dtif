# AGENTS

This repository targets **Node.js 22 or newer** (with pnpm 10 or newer). Match the tooling version locally to avoid drift from CI.

All published workspaces adhere to strict [Semantic Versioning](https://semver.org/). Pick the appropriate bump size whenever you
prepare a release.

## Before committing

1. Ensure dependencies are installed via `pnpm install` (or `pnpm install --frozen-lockfile` for a clean install).
2. Run — and make sure you pass — the following checks:
   - `pnpm run format:check`
   - `pnpm run lint`
   - `pnpm run lint:ts` whenever you touch JavaScript or TypeScript sources
   - `pnpm test`
   - `pnpm --filter @lapidist/dtif-language-server run build` and `pnpm --filter @lapidist/dtif-language-server test` when you modify files inside `language-server/`
   - `pnpm run lint:docs` if you change files inside `docs/`
   - `pnpm --filter @lapidist/dtif-parser test` whenever you modify files inside `parser/`
   - Create a changeset covering `@lapidist/dtif-parser` whenever you modify files inside `parser/`
3. When you modify the schema or validator packages, run `pnpm run build:packages` to confirm the generated artefacts stay in sync.
4. If you touch the documentation site configuration (`docs/.vitepress`) or content that should build statically, run `pnpm run docs:build` before submitting.

## Changesets and releases

- Every user-visible feature or fix requires a changeset written with `pnpm run changeset`.
- Choose the correct semver bump for the affected packages (typically `@lapidist/dtif-schema`, `@lapidist/dtif-validator`, and/or `@lapidist/dtif-parser`).
- Keep the autogenerated front matter and provide a concise summary of the change in the body.

## Commit guidelines

- Follow the Conventional Commits convention (`type(scope): description`).
- Keep commits focused and avoid bundling unrelated changes.

## Additional notes

- Use `pnpm run format` to apply project formatting when needed.
- Do not disable lint rules via inline comments; code must satisfy ESLint/markdownlint without overrides.
- Prefer precise TypeScript typings — avoid casting to `any` or other broad assertions unless absolutely necessary.
